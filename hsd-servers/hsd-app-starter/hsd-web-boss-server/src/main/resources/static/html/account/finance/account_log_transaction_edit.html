<!DOCTYPE html>
<html lang="zh" ng-app="app">
<head>
<meta charset="utf-8" />
<title>//TODO 账户-日志-交易记录 新增/编辑</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
<meta content="width=device-width, initial-scale=1.0" name="viewport" />
<meta name="description" content="memo of your site" />
<meta name="author" content="author of the site" />
<link rel="shortcut icon" href="/favicon.ico">

<link href="/plugins/hplus/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
<link href="/plugins/hplus/css/font-awesome.css?v=4.4.0" rel="stylesheet">
<link href="/plugins/hplus/css/animate.css" rel="stylesheet">
<link href="/plugins/hplus/css/style.css?v=4.1.0" rel="stylesheet">

<link href="/plugins/hplus/css/plugins/iCheck/custom.css" rel="stylesheet">
<link href="/plugins/hplus/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
<script type="text/javascript" src="/js/jquery-1.10.2.min.js" ></script>

<link href="/css/common.css" rel="stylesheet">

<link rel="stylesheet" href="/plugins/editor/themes/default/default.css" />
<link rel="stylesheet" href="/plugins/editor/plugins/code/prettify.css" />
</head>

<body class="gray-bg ng-cloak" ng-controller="app-ctrl" ng-cloak>
<div class="wrapper wrapper-content animated fadeInRight">
	<div class="row">
		<div class="ibox float-e-margins">
			<div class="ibox-content col-md-12">
				<form id="accountLogTransaction_01" method="post" class="form m-t" ng-submit="save()" accept-charset="UTF-8" >
					<div class="col-md-12" style="height: 50px;">
						<div style="float:right;">
							<input class="btn btn-primary" type="submit" value="保存" /> | <a href="javascript:" onclick="closeMyBoxLayer();">返回</a>
						</div>
					</div>
					<input type="hidden" name="id" value="{{item.id}}" />
					<input type="hidden" name="token" value="" ng-value="item.token || uuidToken" />
					<input type="hidden" name="newFlag" value="{{newFlag!=0?0:1}}" />
					<div class="clearfix "></div>
					<div class="col-sm-6 b-r">

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">支付账户id：</label>
                            <div class="col-md-12">
                                <input id="bean-accountId" name="accountId" value="{{item.accountId}}" class="form-control" type="text"  placeholder="请输入支付账户id"  required="" aria-required="true"  aria-describedby="bean-accountId-error"   aria-invalid="true">
                                <span id="bean-accountId-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">支付流水号：</label>
                            <div class="col-md-12">
                                <input id="bean-serialNumber" name="serialNumber" value="{{item.serialNumber}}" class="form-control" type="text"  placeholder="请输入支付流水号"  aria-describedby="bean-serialNumber-error"  maxlength="32"   aria-invalid="true">
                                <span id="bean-serialNumber-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">外部交易时间：</label>
                            <div class="col-md-12">
                                <input id="bean-outTradeDate" name="outTradeDate" value="{{item.outTradeDate}}" class="form-control" type="text"  placeholder="请输入外部交易时间"  aria-describedby="bean-outTradeDate-error"  maxlength="32"   aria-invalid="true">
                                <span id="bean-outTradeDate-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">交易编号：</label>
                            <div class="col-md-12">
                                <input id="bean-tradeCode" name="tradeCode" value="{{item.tradeCode}}" class="form-control" type="text"  placeholder="请输入交易编号"  aria-describedby="bean-tradeCode-error"  maxlength="32"   aria-invalid="true">
                                <span id="bean-tradeCode-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">交易金额：</label>
                            <div class="col-md-12">
                                <input id="bean-tradeAmount" name="tradeAmount" value="{{item.tradeAmount}}" class="form-control" type="text"  placeholder="请输入交易金额"  required="" aria-required="true"  aria-describedby="bean-tradeAmount-error"   aria-invalid="true">
                                <span id="bean-tradeAmount-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">货币类型：</label>
                            <div class="col-md-12">
                                <input id="bean-currency" name="currency" value="{{item.currency}}" class="form-control" type="text"  placeholder="请输入货币类型"  aria-describedby="bean-currency-error"   aria-invalid="true">
                                <span id="bean-currency-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">冻结状态：</label>
                            <div class="col-md-12">
                                <input id="bean-isFreeze" name="isFreeze" value="{{item.isFreeze}}" class="form-control" type="text"  placeholder="请输入冻结状态"  aria-describedby="bean-isFreeze-error"   aria-invalid="true">
                                <span id="bean-isFreeze-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">转出账户类型：</label>
                            <div class="col-md-12">
                                <input id="bean-outAccountType" name="outAccountType" value="{{item.outAccountType}}" class="form-control" type="text"  placeholder="请输入转出账户类型"  aria-describedby="bean-outAccountType-error"   aria-invalid="true">
                                <span id="bean-outAccountType-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">转出账户id：</label>
                            <div class="col-md-12">
                                <input id="bean-outAccountId" name="outAccountId" value="{{item.outAccountId}}" class="form-control" type="text"  placeholder="请输入转出账户id"  aria-describedby="bean-outAccountId-error"   aria-invalid="true">
                                <span id="bean-outAccountId-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">转出子账户类型：</label>
                            <div class="col-md-12">
                                <input id="bean-outAccountSubType" name="outAccountSubType" value="{{item.outAccountSubType}}" class="form-control" type="text"  placeholder="请输入转出子账户类型"  aria-describedby="bean-outAccountSubType-error"   aria-invalid="true">
                                <span id="bean-outAccountSubType-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">转出子账户id：</label>
                            <div class="col-md-12">
                                <input id="bean-outAccountSubId" name="outAccountSubId" value="{{item.outAccountSubId}}" class="form-control" type="text"  placeholder="请输入转出子账户id"  aria-describedby="bean-outAccountSubId-error"   aria-invalid="true">
                                <span id="bean-outAccountSubId-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">转入账户类型：</label>
                            <div class="col-md-12">
                                <input id="bean-inAccountType" name="inAccountType" value="{{item.inAccountType}}" class="form-control" type="text"  placeholder="请输入转入账户类型"  aria-describedby="bean-inAccountType-error"   aria-invalid="true">
                                <span id="bean-inAccountType-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">转入账户id：</label>
                            <div class="col-md-12">
                                <input id="bean-inAccountId" name="inAccountId" value="{{item.inAccountId}}" class="form-control" type="text"  placeholder="请输入转入账户id"  aria-describedby="bean-inAccountId-error"   aria-invalid="true">
                                <span id="bean-inAccountId-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">转入子账户类型：</label>
                            <div class="col-md-12">
                                <input id="bean-inAccountSubType" name="inAccountSubType" value="{{item.inAccountSubType}}" class="form-control" type="text"  placeholder="请输入转入子账户类型"  aria-describedby="bean-inAccountSubType-error"   aria-invalid="true">
                                <span id="bean-inAccountSubType-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">转入子账户id：</label>
                            <div class="col-md-12">
                                <input id="bean-inAccountSubId" name="inAccountSubId" value="{{item.inAccountSubId}}" class="form-control" type="text"  placeholder="请输入转入子账户id"  aria-describedby="bean-inAccountSubId-error"   aria-invalid="true">
                                <span id="bean-inAccountSubId-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">操作人id：</label>
                            <div class="col-md-12">
                                <input id="bean-actionAppUserId" name="actionAppUserId" value="{{item.actionAppUserId}}" class="form-control" type="text"  placeholder="请输入操作人id"  required="" aria-required="true"  aria-describedby="bean-actionAppUserId-error"   aria-invalid="true">
                                <span id="bean-actionAppUserId-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

					</div>
					<div class="col-sm-6">

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">交易状态：</label>
                            <div class="col-md-12">
                                <input id="bean-state" name="state" value="{{item.state}}" class="form-control" type="text"  placeholder="请输入交易状态"  aria-describedby="bean-state-error"   aria-invalid="true">
                                <span id="bean-state-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">交易渠道：</label>
                            <div class="col-md-12">
                                <input id="bean-tradeChannel" name="tradeChannel" value="{{item.tradeChannel}}" class="form-control" type="text"  placeholder="请输入交易渠道"  aria-describedby="bean-tradeChannel-error"  maxlength="32"   aria-invalid="true">
                                <span id="bean-tradeChannel-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">交易机构：</label>
                            <div class="col-md-12">
                                <input id="bean-tradeAgency" name="tradeAgency" value="{{item.tradeAgency}}" class="form-control" type="text"  placeholder="请输入交易机构"  aria-describedby="bean-tradeAgency-error"   aria-invalid="true">
                                <span id="bean-tradeAgency-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">外部订单号：</label>
                            <div class="col-md-12">
                                <input id="bean-outOrderNo" name="outOrderNo" value="{{item.outOrderNo}}" class="form-control" type="text"  placeholder="请输入外部订单号"  aria-describedby="bean-outOrderNo-error"  maxlength="32"   aria-invalid="true">
                                <span id="bean-outOrderNo-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">外部订单名称：</label>
                            <div class="col-md-12">
                                <input id="bean-outOrderName" name="outOrderName" value="{{item.outOrderName}}" class="form-control" type="text"  placeholder="请输入外部订单名称"  aria-describedby="bean-outOrderName-error"  maxlength="55"   aria-invalid="true">
                                <span id="bean-outOrderName-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">交易说明：</label>
                            <div class="col-md-12">
                                <input id="bean-tradeDesc" name="tradeDesc" value="{{item.tradeDesc}}" class="form-control" type="text"  placeholder="请输入交易说明"  required="" aria-required="true"  aria-describedby="bean-tradeDesc-error"  maxlength="80"   aria-invalid="true">
                                <span id="bean-tradeDesc-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">业务类型:1投资扣费,2收款,3充值,4提现,6奖励,7转账,8投资奖励,9融资,10扣费,11充值手续费,12提现撤销,13提现手续费,14借款管理费,15投资冻结资金,16投资撤回解冻资金,17投资奖励扣除,19还款,20内部调账,21结息,22原交易退款,23原交易撤销：</label>
                            <div class="col-md-12">
                                <input id="bean-bizType" name="bizType" value="{{item.bizType}}" class="form-control" type="text"  placeholder="请输入业务类型:1投资扣费,2收款,3充值,4提现,6奖励,7转账,8投资奖励,9融资,10扣费,11充值手续费,12提现撤销,13提现手续费,14借款管理费,15投资冻结资金,16投资撤回解冻资金,17投资奖励扣除,19还款,20内部调账,21结息,22原交易退款,23原交易撤销"  required="" aria-required="true"  aria-describedby="bean-bizType-error"   aria-invalid="true">
                                <span id="bean-bizType-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">业务类型名称：</label>
                            <div class="col-md-12">
                                <input id="bean-bizTypeName" name="bizTypeName" value="{{item.bizTypeName}}" class="form-control" type="text"  placeholder="请输入业务类型名称"  aria-describedby="bean-bizTypeName-error"  maxlength="32"   aria-invalid="true">
                                <span id="bean-bizTypeName-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">业务ID：</label>
                            <div class="col-md-12">
                                <input id="bean-bizId" name="bizId" value="{{item.bizId}}" class="form-control" type="text"  placeholder="请输入业务ID"  aria-describedby="bean-bizId-error"  maxlength="32"   aria-invalid="true">
                                <span id="bean-bizId-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">业务描述：</label>
                            <div class="col-md-12">
                                <input id="bean-bizName" name="bizName" value="{{item.bizName}}" class="form-control" type="text"  placeholder="请输入业务描述"  aria-describedby="bean-bizName-error"  maxlength="55"   aria-invalid="true">
                                <span id="bean-bizName-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">相关交易id：</label>
                            <div class="col-md-12">
                                <input id="bean-refTradeId" name="refTradeId" value="{{item.refTradeId}}" class="form-control" type="text"  placeholder="请输入相关交易id"  aria-describedby="bean-refTradeId-error"  maxlength="32"   aria-invalid="true">
                                <span id="bean-refTradeId-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">会计科目代码：</label>
                            <div class="col-md-12">
                                <input id="bean-finSubjectCode" name="finSubjectCode" value="{{item.finSubjectCode}}" class="form-control" type="text"  placeholder="请输入会计科目代码"  aria-describedby="bean-finSubjectCode-error"  maxlength="32"   aria-invalid="true">
                                <span id="bean-finSubjectCode-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">凭证id：</label>
                            <div class="col-md-12">
                                <input id="bean-finVoucherId" name="finVoucherId" value="{{item.finVoucherId}}" class="form-control" type="text"  placeholder="请输入凭证id"  aria-describedby="bean-finVoucherId-error"  maxlength="32"   aria-invalid="true">
                                <span id="bean-finVoucherId-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">备注：</label>
                            <div class="col-md-12">
                                <input id="bean-memo" name="memo" value="{{item.memo}}" class="form-control" type="text"  placeholder="请输入备注"  aria-describedby="bean-memo-error"  maxlength="55"   aria-invalid="true">
                                <span id="bean-memo-error" class="help-block m-b-none"></span>
                            </div>
                        </div>

					</div>

					<div class="clearfix "></div>
					<div class="col-md-12">

                        <div class="form-group clearfix">
                            <label class="col-md-3 control-label">交易数据json：</label>
                            <div class="col-md-12">
                                <textarea ng-bind-html="kfReady('bean-data',item.data)" id="bean-data" name="data" style="height: 300px;width: 100%;" class="form-control"  placeholder="请输入交易数据json"  aria-describedby="bean-data-error"  maxlength="65535"   aria-invalid="true">
                                </textarea>
                                <span id="bean-data-error" class="help-block m-b-none"></span>
                            </div>
                        </div>
					</div>
					<div class="clearfix "></div>
					<div class="col-md-12" style="height: 50px;">
						<div style="width: 200px; margin: 0 auto;">
							<input class="btn btn-primary" type="submit" value="保存" /> | <a href="javascript:" onclick="closeMyBoxLayer();">返回</a>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<!--<script src="/plugins/hplus/js/jquery.min.js?v=2.1.4"></script>-->
<script src="/plugins/hplus/js/bootstrap.min.js?v=3.3.6"></script>
<script src="/js/jquery.form.js" type="text/javascript" ></script>
<script src="/plugins/hplus/js/plugins/peity/jquery.peity.min.js"></script>
<script src="/plugins/hplus/js/content.js?v=1.0.0"></script>

<script src="/plugins/hplus/js/plugins/validate/jquery.validate.min.js"></script>
<script src="/plugins/hplus/js/plugins/validate/messages_zh.min.js"></script>

<script src="/plugins/hplus/js/plugins/datapicker/bootstrap-datepicker.js"></script>
<script src="/plugins/layer/layer.js" type="text/javascript"></script>
<script type="text/javascript" src="/js/global.js"></script>

<script type="text/javascript" src="/js/angular.min.js"></script>
<script type="text/javascript" src="/js/angular-sanitize.min.js"></script>
<script type="text/javascript" src="/js/common.js"></script>

<script charset="utf-8" src="/plugins/editor/kindeditor-all-min.js"></script>
<script type="text/javascript">
    KindEditor.ready(function(K) {

            //--编辑框(完整)[交易数据json]
            K.create('#bean-data', {
                resizeType : 2,
                uploadJson : '/fileUpload?isrich=1',
                fileManagerJson : '/fileManagerServlet',
                allowFileManager : true,
                afterBlur: function () { this.sync();}
            });
    });
    function formValidate(){
        setTimeout(function(){
            $("#accountLogTransaction_01").validate();
        },1000);
    }

    angular.module("app", ['ngSanitize']).controller("app-ctrl", function ($scope,$compile) {
        $data = $scope;
        $ngCompile=$compile;
        staff.init(function(){
           $data.newFlag=sessionStorage.getItem(site.accountLogTransaction.info);
           if($data.newFlag) $data.uuidToken=util.guid();
           if(sessionStorage.getItem(site.accountLogTransaction.info) && sessionStorage.getItem(site.accountLogTransaction.info)!=0){
               loadInfo(sessionStorage.getItem(site.accountLogTransaction.info));
           }
        });
        $scope.save = function () {
            if($("#accountLogTransaction_01").valid()){
                $.post(site.accountLogTransaction.save, $('#accountLogTransaction_01').serialize(),function (result) {
                        //console.info("获取数据.." + JSON.stringify(result));
                        if (result.code == 0) {
                            alert('保存成功!');
                            parent.location.href = site.accountLogTransaction.view+'.html';
                        } else {
                            alert(result.message);
                        }
                }, 'json');
            }
        }
    });
    var loadInfo=function(id){
        $.get(site.accountLogTransaction.info + id, {},function (result) {
             //console.info("获取数据.." + JSON.stringify(result));
             if (result.code == 0) {
                 $data.item = result.data;
             } else {
                 $data.message = result.message;
                 alert( result.message);
             }
             if(!$data.$$phase) $data.$apply();
         }, 'json');
    };

    $(document).ready(function(){
        formValidate();
    });
</script>
</body>
</html>

