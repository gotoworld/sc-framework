<%
/*
* 组织架构_部门 后台管理 (初始化页面)
*
* VERSION  DATE        BY           REASON
* -------- ----------- ------------ ------------------------------------------
* 1.00     2015.10.01  easycode   程序.发布
* -------- ----------- ------------ ------------------------------------------
* Copyright 2015 isd System. - All Rights Reserved.
*
*/
%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <% layout("../include/meta.html"){}%>
    <% layout("../include/public_init_js_css.html"){}%>
</head>
<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="clients-list">
                <ul class="nav nav-tabs">
                    <li class="active"><a data-toggle="tab" href="#tab-1" aria-expanded="true">信息列表</a></li>
                </ul>
                <% layout("../include/notifications.html"){}%>
                <% if(shiro.hasPermission("orgDept:add")){ %>
                <a href="#" onclick="openMyBoxLayer('a','${basePath}h/org/dept/edit/0');"
                   class="btn btn-xs btn-success"><i class="fa fa-edit"></i> 新增/添加</a>
                <%}%>
                <div class="table-responsive table-scrollable">
                    <table class="table table-bordered table-striped  table-hover">
                        <thead>
                        <tr>
                            <th style="width: 20px"></th>
                            <th class="col-sm-6 b-r">组织机构名称</th>
                            <th class="col-sm-2">编码</th>
                            <th class="col-sm-2">备注</th>
                            <th class=""></th>
                        </tr>
                        </thead>
                        <tbody>
                <%
                pageCtx("trIndex",0);//全局变量
                for(bean in beans!){
                    pageCtx("trIndex",pageCtx("trIndex")+1);
                %>
                        <tr>
                            <td>${pageCtx("trIndex")}</td>
                            <td> - ${bean.name}</td>
                            <td>${bean.code}</td>
                            <td>${bean.memo}</td>
                            <td>
                                <% if(shiro.hasPermission("orgDept:edit")){ %>
                                <a href="javascript:;"  onclick="openMyBoxLayer('e','${basePath}h/org/dept/edit/${bean.id}');" class="label label-success" ><i class="fa fa-edit"></i> 编辑</a>
                                <%}%>
                                <% if(shiro.hasPermission("orgDept:del")){ %>
                                <% if(isEmpty(bean.beans) || bean.beans.~size==0){ %>
                                <a href="javascript:;"  onclick="if(confirm('确认删除吗?')){delInfoData('${basePath}h/org/dept/del/${bean.id}');};" class="label label-danger" ><i class="fa fa-trash-o"></i> 删除</a>
                                <%}}%>
                            </td>
                        </tr>
                <%
                        if(isNotEmpty(bean.beans) && bean.beans.~size>0){
                            layout("org_dept_tree_info.html",{beans:bean.beans,treeIndex:1}){};
                         }
                }elsefor{
                %>
                        <tr>
                            <td colspan="5">
                                <div class="alert"><strong>暂无数据!</strong></div>
                            </td>
                        </tr>
                <%}%>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<% layout("../include/public_last_js_css.html"){}%>
<script>
    //初始加载..
    loadUrlPage(null, 'info_search_form', 'info_list_div');
</script>
</body>
</html>
