<!-- 
 /*	
 * 全景_视频 后台管理 (信息编辑页面)
 *		
 * VERSION      DATE          BY              REASON		
 * -------- ----------- --------------- ---------------------------	
 * 1.00     2016.10.02      easycode         程序.发布		
 * -------- ----------- --------------- ---------------------------	
 * Copyright 2016 pano System. - All Rights Reserved.
 *	
 */
  -->
<!DOCTYPE html>
<html ng-app="app">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta name="description" content="memo of your site" />	<meta name="author" content="author of the site" />
	<link rel="shortcut icon" href="favicon.ico"> 
	
<link href="/plugins/hplus/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
	<link href="/plugins/hplus/css/font-awesome.css?v=4.4.0" rel="stylesheet">
	<link href="/plugins/hplus/css/animate.css" rel="stylesheet">
	<link href="/plugins/hplus/css/style.css?v=4.1.0" rel="stylesheet">
	
	<link href="/plugins/hplus/css/plugins/iCheck/custom.css" rel="stylesheet">
	<link href="/plugins/hplus/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
	<script type="text/javascript" src="/js/jquery-1.10.2.min.js" ></script>
<link href="/plugins/hplus/css/plugins/plyr/plyr.css" rel="stylesheet">
<link href="/css/upload.css" rel="stylesheet">

<style type="text/css">
#upload_scene_btn{width: 220px;height: 164px;float: left;} 
</style>
</head>

<body class="gray-bg" ng-controller="app-ctrl" class="ng-cloak" ng-cloak>
	<div class="wrapper wrapper-content animated fadeInRight">
		<div class="row">
			<div class="ibox float-e-margins">
				<div class="ibox-content col-sm-12">
					<form id="video_editor" method="post" class="form m-t" target="_parent" accept-charset="UTF-8" action="/m/video/save">
						<div class="col-sm-12">
							<div style="float:right;">
								<input class="btn btn-primary" type="submit" value="保存" /> | <a href="javascript:;" onclick="closeMyBoxLayer();">返回</a>
							</div>
						</div>
						<input type="hidden" name="pageNum" id="bean-pageNum" value="${bean.pageNum}">
			            <input type="hidden" name="id" value="${bean.id}" />
						<input type="hidden" name="token" value="${bean.token}" />
                        <input type="hidden" name="newFlag" value="${bean.newFlag}" />
                        <input type="hidden" name="type" value="1" />
					    <div class="col-sm-6 b-r">
							<div class="form-group clearfix">
								<label class="col-md-3 control-label"  for="bean-name">名称:</label>
								<div class="col-md-12">
									<input id="bean-name" name="name" value="${bean.name}" class="form-control" type="text"  placeholder="名称"  required="" aria-required="true" aria-describedby="bean-name-error"  maxlength="50"   aria-invalid="true">
									<span id="bean-name-error" class="help-block m-b-none"></span>
								 </div>
							 </div>
							<div class="form-group clearfix">
								<label class="col-md-3 control-label"  for="bean-memo">备注:</label>
								<div class="col-sm-12">
									<input id="bean-memo" name="memo" value="${bean.memo}" class="form-control" type="text"  placeholder="备注" aria-describedby="bean-memo-error"  maxlength="255"   aria-invalid="true">
									<span id="bean-memo-error" class="help-block m-b-none"></span>
								</div>
							</div>
						</div>
						<div class="col-sm-6">
							<div class="form-group clearfix">
								<label class="col-md-3 control-label"  for="bean-categoryId">类目:</label>
								<div class="col-md-12">
									<!--  var treeIndex=1;  -->
									<!--  var _band_flag=bean.categoryId;  -->
									<select  class="form-control" name="categoryId" id="bean-categoryId">
										<option>请选择..</option>
										<!--  for(b in nodes !){  -->
										<option  value="${b.id}" ${_band_flag==b.id?'selected="selected"':''} >-${b.name}</option>
										<!--  layout("pano_category_tree_select.html",{treeIndex:1,nodes:b.nodes,_band_flag:bean.categoryId}){}  -->
										<!--  }  -->
									</select>
								</div>
								<span id="bean-categoryId-error" class="help-block m-b-none"></span>
							</div>
						</div>
						<div class="col-sm-12 form-group">
							<div class="col-sm-12">
								<p>视频上传:<span class="red s12">全景视频的格式为 mp4;</span></p>
								<div class="img-input red" id="upload_scene_div" style="">
								<!--  if(bean.scenes!=null && bean.scenes.~size>0){
									for(scene in bean.scenes){
								  -->
									<div id="${scene.id}" class="img-grid">
										<input name="scene_id" value="${scene.id}" type="hidden">
										<input name="${scene.id}_scene_src" value="${scene.sceneSrc}" type="hidden">
										<img src="/img/vuped.png">
										<input name="${scene.id}_scene_tit" value="${scene.sceneTitle}" placeholder="请填写清晰度,比如:标清" required="" aria-required="true" maxlength="5" aria-invalid="true" type="text">
										<a href="javascript:;" onclick="move_scene(this,'left');" class="ico_left"></a>
										<a href="javascript:;" onclick="javascript:del_scene_btn(this,'${scene.id}');" class="ico_del"></a>
										<a href="javascript:;" onclick="move_scene(this,'right');" class="ico_right"></a>
									</div>
								<!--  }
									}
								  -->
								</div>
								<div class="upload_scene_btn" style="">
									<a href="javascript:;" id="upload_scene_btn"><img src="/img/add_video_btn.png" style="border: solid 4px #ddd"></a>
								</div>
							</div>
						</div>

						<div class="col-sm-12">
							<div style="width: 200px;margin: 0 auto;">
								<input class="btn btn-primary" type="submit" value="保存" /> | <a href="javascript:;" onclick="closeMyBoxLayer();">返回</a>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<script src="/plugins/hplus/js/bootstrap.min.js?v=3.3.6"></script>
	<script src="/plugins/hplus/js/plugins/peity/jquery.peity.min.js"></script>
	<script src="/plugins/hplus/js/content.js?v=1.0.0"></script>
	
	<script src="/plugins/hplus/js/plugins/validate/jquery.validate.min.js"></script>
	<script src="/plugins/hplus/js/plugins/validate/messages_zh.min.js"></script>
	
	<script src="/plugins/hplus/js/plugins/datapicker/bootstrap-datepicker.js"></script>
	<script type="text/javascript" src="/js/jquery.form.js"></script>
	<script src="/plugins/layer/layer.js" type="text/javascript"></script>
	<script type="text/javascript" src="/js/global.js"></script>
<script type="text/javascript" src="/js/angular.min.js"></script>
<script type="text/javascript" src="/js/common.js"></script>
<script type="text/javascript">
    var $data;
    angular.module("app", []).controller("app-ctrl", function ($scope, $http) {
        $data = $scope;

    });
    $(function () {
        user.init(function () {
            //TODO
        });
    });
</script>
<style type="text/css">
.table-scrollable {	border: 0px solid #dddddd;	margin: 5px 0 !important;}
.form-actions {	margin-bottom: 10px;}
.table thead {	background: #eee;}
.date-col{width: 150px;}
.version-col{width: 50px;}
</style>
	<script src="/plugins/hplus/js/plugins/plyr/plyr.js"></script>
	<script src="/plugins/plupload/js/plupload.min.js"></script>
	<script type="text/javascript" src="/js/video_upload.js"></script>
	<script type="text/javascript">
	$().ready(function(){
		formValidate();
	});
	function formValidate(){
		setTimeout(function(){
			$("#video_editor").validate();
		},1000);
	}
	var uploader = video_upload('upload_scene_btn','upload_scene_div');
	//删除上传的场景
	function del_scene_btn(ele, file) {
		if (file) {
			//删除uploader保存的上传记录
			uploader.removeFile(file);
		};
		$(ele).parent().remove();
	}
	function move_scene(ele, direction) {
// 		console.log(direction);
		var $p = $(ele).parent("div");
		if (direction == "left") {
			if ($p.prev()) {
				$p.prev().before($p);
			};
		} else {
			if ($p.next()) {
				$p.next().after($p);
			};
		}
	}
	</script>
</body>
</html>

