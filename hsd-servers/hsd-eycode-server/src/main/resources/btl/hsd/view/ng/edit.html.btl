<!DOCTYPE html>
<html lang="en" ng-app="app">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>demo edit</title>
    <link rel="stylesheet" href="css/weui.min.css"/>
    <link rel="stylesheet" href="css/common.css"/>
</head>
<style type="text/css">
</style>

<body ng-controller="app-ctrl" class="ng-cloak" ng-cloak>
<div class="page">
    <div class="hd">
        <h1 class="page_title">示例 {{userName}}</h1>
    </div>
    <div class="bd">
        <form id="form1" class="weui_cells weui_cells_form">
            <input type="hidden" name="id" ng-value="item.id">
            <input type="hidden" name="token" ng-value="item.token">
            <div class="weui_cell" ng-if="item.id>0">
                <div class="weui_cell_hd">
                    <label class="weui_label">ID</label>
                </div>
                <div class="weui_cell_bd weui_cell_primary" ng-bind="item.id">
                </div>
            </div>
            <div class="weui_cell">
                <div class="weui_cell_hd">
                    <label class="weui_label">姓名</label>
                </div>
                <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="text" name="name" placeholder="请输入姓名" ng-value="item.name"/>
                </div>
            </div>
            <div class="weui_cell">
                <div class="weui_cell_hd">
                    <label class="weui_label">年龄</label>
                </div>
                <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="text" name="age" placeholder="请输入年龄" ng-value="item.age"/>
                </div>
            </div>
            <a href="javascript:void(0);" ng-click="save()">保存</a>
            |
            <a href="index.html">返回</a>
        </form>
    </div>
</div>
<script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
<script type="text/javascript" src="js/angular.min.js"></script>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript">
    var $data;
    angular.module("app", [ /]).controller("app-ctrl", function ($scope, $http) {
        $data = $scope;
        user.info();
        $scope.save = function () {
            $.post(site.demo.save, $('#form1').serialize(),
                function (result) {
//                    console.info("获取数据.." + JSON.stringify(result));
                    if (result.code == 0) {
                        alert('保存成功!');
                        location.href = './index.html';
                    } else {
                        alert(result.message);
                    }
                }, 'json');
        }
    })
    $(function () {
        demo.info(sessionStorage.getItem(site.demo.info));
    });
</script>
</body>
</html>
