<!DOCTYPE html>
<html lang="zh" ng-app="app">
<head>
<meta charset="utf-8" />
<title>//TODO 会员信息表 新增/编辑</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
<meta content="width=device-width, initial-scale=1.0" name="viewport" />
<meta name="description" content="memo of your site" />
<meta name="author" content="author of the site" />
<link rel="shortcut icon" href="/favicon.ico">

<link href="/plugins/hplus/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
<link href="/plugins/hplus/css/font-awesome.css?v=4.4.0" rel="stylesheet">
<link href="/plugins/hplus/css/animate.css" rel="stylesheet">
<link href="/plugins/hplus/css/style.css?v=4.1.0" rel="stylesheet">

<link href="/plugins/hplus/css/plugins/iCheck/custom.css" rel="stylesheet">
<link href="/plugins/hplus/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
<link href="/css/common.css" rel="stylesheet">
<style>
    .pl0{padding-left:0px;}
    .clients-list .tab-pane{height: auto;}
</style>
    <script>
        if (window.top !== window.self) {
            window.top.location = window.location;
        }
    </script>
</head>

<body class="gray-bg top-navigation ng-cloak" ng-controller="app-ctrl" ng-cloak>
<div class="fixed-sidebar border-bottom white-bg" >
    <nav class="navbar navbar-static-top" role="navigation" style="width: 1330px;background: #ffffff;margin: 0px auto;">
        <div class="navbar-header">
            <button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
                <i class="fa fa-reorder"></i>
            </button>
            <label class="navbar-brand" style="margin-bottom: 0px;">DEMO</label>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-left">
                <li class="active">
                    <a aria-expanded="false" role="button" href="/index.html"> 首页</a>
                </li>
                <li class="dropdown">
                    <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown"> 我要投资
                        <span class="caret"></span></a>
                    <ul role="menu" class="dropdown-menu">
                        <li><a href="#">芝麻开花</a></li>
                        <li><a href="#">定期项目</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown"> 我要借款
                        <span class="caret"></span></a>
                    <ul role="menu" class="dropdown-menu">
                        <li><a href="#">汽车分期</a> </li>
                        <li><a href="#">净值借款</a> </li>
                        <li><a href="#">线下借款</a> </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown"> 信息披露
                        <span class="caret"></span></a>
                    <ul role="menu" class="dropdown-menu">
                        <li><a href="#">关于我们</a> </li>
                        <li><a href="#">安全保障</a> </li>
                        <li><a href="#">平台数据</a> </li>
                        <li><a href="#">运营报告</a> </li>
                    </ul>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-top-links navbar-right">
                <li class="dropdown">
                    <!--<a ng-show="!util.notEmpty(userInfo.account)" data-toggle="modal" href="/index.html#modal-form">-->
                    <!--<i class="fa fa-sign-in"></i> 登录-->
                    <!--</a>-->
                    <a ng-show="util.notEmpty(userInfo.account)" aria-expanded="false" role="button" href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-user-secret"></i>我的账户 <span class="caret"></span>
                    </a>
                    <ul ng-show="util.notEmpty(userInfo.account)" role="menu" class="dropdown-menu">
                        <li><a href="/html/account/actor/home.html">我的投资</a> </li>
                        <li><a href="/html/account/actor/home.html">我的借款</a> </li>
                        <li><a href="/html/account/actor/home.html">资金明细</a> </li>
                        <li><a href="#" ng-click="user.logout()">安全退出 <i class="fa fa-sign-out"></i> </a> </li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
</div>

<div class="wrapper" style="width: 1330px;background: #ffffff;margin: 10px auto;height: 1200px;">
    <!--左侧导航开始-->
    <nav class="navbar-default navbar-static-side" role="navigation" style="width: 200px;min-height:876px;float: left;background: #fff; margin-bottom: 10px;padding-right:10px;border-right:1px dashed #e0e0e0;">
        <div class="nav-close"><i class="fa fa-times-circle"></i>
        </div>
        <div class="sidebar-collapse">
            <ul class="nav" id="side-menu">
                <li class="nav-header" style="text-align: center;">
                    <div class="dropdown profile-element">
                        <span ><img alt="image" class="img-circle" src="/img/avatar.png" /></span>
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <span class="clear">
                               <span class="block m-t-xs"><strong class="font-bold" ng-bind="userInfo.account"></strong></span>
                                <span class="text-muted text-xs block" ><label ng-bind="userInfo.name"></label></span>
                                </span>
                        </a>
                    </div>
                    <div class="logo-element">DEMO
                    </div>
                </li>
                <li>
                    <a href="#" class="title">
                        <i class="fa fa-vimeo"></i>
                        <span class="nav-label">我的账户</span>
                        <!-- <span class="fa arrow"></span> -->
                    </a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a class="J_menuItem" href="../home.html">账户总览</a>
                            <a class="J_menuItem active" href="../home_setting.html">个人设置</a>
                            <a class="J_menuItem" href="#">自动投标</a>
                            <a class="J_menuItem" href="#">消息中心</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-vimeo"></i>
                        <span class="nav-label">我的投资</span>
                        <!-- <span class="fa arrow"></span> -->
                    </a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a class="J_menuItem" href="#">投资统计</a>
                            <a class="J_menuItem" href="#">天天盈</a>
                            <a class="J_menuItem" href="#">芝麻开花</a>
                            <a class="J_menuItem" href="#">定期投资</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-vimeo"></i>
                        <span class="nav-label">我的借款</span>
                        <!-- <span class="fa arrow"></span> -->
                    </a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a class="J_menuItem" href="#">净值借款</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-vimeo"></i>
                        <span class="nav-label">资金管理</span>
                        <!-- <span class="fa arrow"></span> -->
                    </a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a class="J_menuItem" href="#">银行卡管理</a>
                            <a class="J_menuItem" href="#">我要充值</a>
                            <a class="J_menuItem" href="#">我要提现</a>
                            <a class="J_menuItem" href="#">资金明细</a>
                            <a class="J_menuItem" href="#">我的优惠券</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-vimeo"></i>
                        <span class="nav-label">合知道</span>
                        <!-- <span class="fa arrow"></span> -->
                    </a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a class="J_menuItem" href="#">我的合知道</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-vimeo"></i>
                        <span class="nav-label">推广有奖</span>
                        <!-- <span class="fa arrow"></span> -->
                    </a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a class="J_menuItem" href="#">推广管理</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-vimeo"></i>
                        <span class="nav-label">我的积分</span>
                        <!-- <span class="fa arrow"></span> -->
                    </a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a class="J_menuItem" href="#">积分明细</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
    <!--左侧导航结束-->
    <!--右侧部分开始-->
    <div class="page-wrapper" class="gray-bg" style="width: 1085px;min-height:876px;float: right;background: #fff;padding: 10px;">
        <div class="row">
            <div class="ibox float-e-margins" style="margin-top: 20px;">
                <div class="col-sm-12">
                    <blockquote class="text-warning" style="font-size:14px;background-color:#EEEEEE">
                        <h4 class="text-warning">个人信息完善</h4>
                    </blockquote>
                </div>
                <div class="ibox-content" style="border:0px;margin-top: 0px;padding-top: 0px">
                    <div class="ibox float-e-margins">
                        <form id="form_1" class="form m-t" ng-submit="submitForm()" accept-charset="UTF-8" >
                            <input type="hidden" name="token" value="" ng-value="item.token || uuidToken" />
                            <div class="clients-list">
                                <ul class="nav nav-tabs">
                                    <li class="active"><a data-toggle="tab" href="#tab-1"><i class="fa fa-user"></i> 基本信息</a> </li>
                                </ul>
                                <div class="tab-content">
                                    <div id="tab-1" class="tab-pane active" style="padding-top: 20px;">
                                        <div class="col-sm-4">
                                            <div class="form-group clearfix">
                                                <label class="col-md-10 control-label">孩子数量：<label class="label label-info control-label"><input type="checkbox" name="maritalState" ng-checked="item.maritalState==1" value="1">已结婚</label> <label class="label label-warning control-label"><input type="checkbox" name="childrenState" ng-checked="item.childrenState==1" value="1">已有小孩</label></label>
                                                <div class="col-md-12">
                                                    <input name="childrenNum" ng-value="item.childrenNum" class="form-control layer-date" type="number"  placeholder="请输入孩子数量"    required="" >
                                                </div>
                                            </div>
                                            <div class="form-group clearfix">
                                                <label class="col-md-10 control-label">开始工作时间：</label>
                                                <div class="col-md-12">
                                                    <input id="bean-workStartDate" name="workStartDate" ng-value="item.workStartDate | date:'yyyy-MM-dd'" class="laydate-icon form-control layer-date" type="text"  placeholder="请输入开始工作时间"    required="" >
                                                </div>
                                            </div>
                                            <div class="form-group clearfix">
                                                <label class="col-md-10 control-label">累计工作年限：</label>
                                                <div class="col-md-12">
                                                    <input name="cumulativeJobTenure" ng-value="item.cumulativeJobTenure" class="form-control layer-date" type="number"  placeholder="请输入累计工作年限"    required="">
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group clearfix">
                                                <label class="col-md-10 control-label">微信：</label>
                                                <div class="col-md-12">
                                                    <input name="wechat" ng-value="item.wechat" class="form-control layer-date" type="text"  placeholder="请输入微信"    maxlength="50">
                                                </div>
                                            </div>
                                            <div class="form-group clearfix">
                                                <label class="col-md-10 control-label">QQ：</label>
                                                <div class="col-md-12">
                                                    <input name="qq" ng-value="item.qq" class="form-control layer-date" type="number"  placeholder="请输入QQ"   maxlength="50"  >
                                                </div>
                                            </div>

                                            <div class="form-group clearfix">
                                                <label class="col-md-10 control-label">传真：</label>
                                                <div class="col-md-12">
                                                    <input name="fax" ng-value="item.fax" class="form-control layer-date" type="text"  placeholder="请输入传真" maxlength="50"  >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group clearfix">
                                                <label class="col-md-5 control-label">生日：</label>
                                                <div class="col-md-12">
                                                    <input id="bean-birthday" name="birthday" ng-value="item.birthday | date:'yyyy-MM-dd'" class="laydate-icon form-control layer-date" type="text"  placeholder="请输入生日"    required="">
                                                </div>
                                            </div>
                                            <div class="form-group clearfix">
                                                <label class="col-md-10 control-label">教育程度：</label>
                                                <div class="col-md-12">
                                                    <select data-placeholder="选择教育程度" name="educationLevel" class="form-control layer-date"     required=""  maxlength="50"  >
                                                        <option value=""  >--请选择教育程度--</option>
                                                        <option value="小学" ng-selected="item.educationLevel=='小学'">小学</option>
                                                        <option value="初中" ng-selected="item.educationLevel=='初中'">初中</option>
                                                        <option value="高中" ng-selected="item.educationLevel=='高中'">高中</option>
                                                        <option value="专科" ng-selected="item.educationLevel=='专科'">专科</option>
                                                        <option value="本科" ng-selected="item.educationLevel=='本科'">本科</option>
                                                        <option value="硕士" ng-selected="item.educationLevel=='硕士'">硕士</option>
                                                        <option value="博士" ng-selected="item.educationLevel=='博士'">博士</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="clearfix "></div>
                                        <div class="col-sm-8">
                                            <div class="form-group clearfix">
                                                <label class="col-md-10 control-label">地址：<label class="label label-warning control-label"><input type="checkbox" name="domicileLiveDiff"  ng-checked="item.domicileLiveDiff==1" value="1">户籍与居住地一致</label></label>
                                                <div class="col-md-12">
                                                    <textarea name="address" class="form-control"  placeholder="请输入地址"    required="" maxlength="200" >{{item.address}}</textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix "></div>
                                <ul class="nav nav-tabs">
                                    <li class="active"><a data-toggle="tab" href="#tab-2"><i class="fa fa-briefcase"></i> 财产状况</a> </li>
                                </ul>
                                <div class="tab-content">
                                    <div id="tab-2" class="tab-pane active" style="padding-top: 20px;">
                                        <div class="col-sm-4">
                                            <div class="form-group clearfix">
                                                <label class="col-md-5 control-label">工作收入：</label>
                                                <div class="col-md-12">
                                                    <input name="income" ng-value="item.income" class="form-control layer-date" type="number"  placeholder="请输入收入"    required="" >
                                                </div>
                                            </div>
                                            <div class="form-group clearfix">
                                                <label class="col-md-5 control-label">其他收入：</label>
                                                <div class="col-md-12">
                                                    <input name="otherIncome" ng-value="item.otherIncome" class="form-control layer-date" type="number"  placeholder="请输入其他收入"    required="" >
                                                </div>
                                            </div>
                                            <div class="form-group clearfix">
                                                <label class="col-md-5 control-label">其他收入来源：</label>
                                                <div class="col-md-12">
                                                    <input name="otherIncomeSrc" ng-value="item.otherIncomeSrc" class="form-control layer-date" type="text"  placeholder="请输入其他收入来源"    required="" maxlength="50"  >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group clearfix">
                                                <label class="col-md-5 control-label">税收：</label>
                                                <div class="col-md-12">
                                                    <input name="tax" ng-value="item.tax" class="form-control layer-date" type="number"  placeholder="请输入税收"    required="" >
                                                </div>
                                            </div>
                                            <div class="form-group clearfix">
                                                <label class="col-md-5 control-label">房产数：</label>
                                                <div class="col-md-12">
                                                    <input name="ownHouseNum" ng-value="item.ownHouseNum" class="form-control layer-date" type="number"  placeholder="请输入房产数"    required="" >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group clearfix">
                                                <label class="col-md-5 control-label">车辆数：</label>
                                                <div class="col-md-12">
                                                    <input name="ownCarNum" ng-value="item.ownCarNum" class="form-control layer-date" type="number"  placeholder="请输入车辆数"    required="" >
                                                </div>
                                            </div>
                                            <div class="form-group clearfix">
                                                <label class="col-md-5 control-label">其他财产备注：</label>
                                                <div class="col-md-12">
                                                    <input name="assetOther" ng-value="item.assetOther" class="form-control layer-date" type="text"  placeholder="请输入其他财产备注"    required=""   maxlength="100"  >
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix "></div>
                                <ul class="nav nav-tabs">
                                    <li class="active"><a data-toggle="tab" href="#tab-3"><i class="fa fa-briefcase"></i> 扩展信息</a> </li>
                                </ul>
                                <div class="tab-content">
                                    <div id="tab-3" class="tab-pane active" style="padding-top: 20px;">
                                        <div class="form-group clearfix">
                                            <div class="col-md-4">
                                                <label style="padding-top: 5px;">属性模板:</label>
                                                <select data-placeholder="选择模板" onchange="getTemplateA()"  class="form-control  layer-date" id="templateSelect">
                                                    <option value="">--选择模板--</option>
                                                    <option ng-repeat="temp in templateResult" ng-value="temp.id}}" ng-selected="tempSelectd(temp)">{{temp.templateName}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <input type="hidden" value="" name="templateId" id="templateIdA">

                                        <div class="col-md-3 " ng-repeat="attr in attributesResult">
                                            <input type="hidden" name="attr{{attr.templateId}}" ng-value="'attr'+attr.templateId+attr.attributeCode}}">
                                            <div class="form-group clearfix" >
                                                <label class="col-md-8 control-label">{{attr.attributeName}}：</label>
                                                <div class="col-md-12" ng-if="!(util.notEmpty(attr.optionValues))">
                                                    <input name="{{'attr'+attr.templateId+attr.attributeCode}}"  ng-value="getTempAttrVal(attr)" class="form-control" type="{{attr.inputType=='num'?'number':'text'}}"  placeholder="请输入{{attr.attributeName}}" ng-required="attr.required==1">
                                                </div>
                                                <div class="col-md-12" ng-if="util.notEmpty(attr.optionValues)" >
                                                    <select id="{{'id_attr'+attr.templateId+attr.attributeCode}}" name="{{'attr'+attr.templateId+attr.attributeCode}}" class="form-control" placeholder="请选择{{attr.attributeName}}" ng-required="attr.required==1">
                                                        <option value="">--请选择{{attr.attributeName}}--</option>
                                                        {{getOptionValuesHtml('id_attr'+attr.templateId+attr.attributeCode,attr)}}
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix "></div>
                            <div class="col-md-12" style="height: 50px;">
                                <div style="width: 200px; margin: 0 auto;">
                                    <input class="btn btn-primary" type="submit" value="保存" />
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <!--右侧部分结束-->
            </div>
        </div>
    </div>
    <div class="footer" style="clear: both;">
        <div class="pull-right">
            By：demo
        </div>
        <div>
            <strong>Copyright</strong> demo &copy; 2017
        </div>
    </div>

    <!-- 全局js -->
    <script src="/plugins/hplus/js/jquery.min.js?v=2.1.4"></script>
    <script src="/plugins/hplus/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="/js/jquery.form.js" type="text/javascript" ></script>
    <script src="/plugins/hplus/js/plugins/peity/jquery.peity.min.js"></script>
    <script src="/plugins/hplus/js/content.js?v=1.0.0"></script>

    <script src="/plugins/hplus/js/plugins/validate/jquery.validate.min.js"></script>
    <script src="/plugins/hplus/js/plugins/validate/messages_zh.min.js"></script>

    <script src="/plugins/hplus/js/plugins/datapicker/bootstrap-datepicker.js"></script>
    <script src="/plugins/layer/layer.js" type="text/javascript"></script>
    <script type="text/javascript" src="/js/global.js"></script>

    <script type="text/javascript" src="/js/angular.min.js"></script>
    <script type="text/javascript" src="/js/angular-sanitize.min.js"></script>
    <script type="text/javascript" src="/js/common.js"></script>

<script type="text/javascript">
    angular.module("app", ['ngSanitize']).controller("app-ctrl", function ($scope,$compile) {
        $data = $scope;
        $ngCompile=$compile;
        $data.attr={};
        user.init(function(){
            console.info('user.init(function(){....')
           $data.newFlag=sessionStorage.getItem(site.member.info);
           if($data.newFlag) $data.uuidToken=util.guid();
            loadInfo(sessionStorage.getItem(site.member.info));
        });
        $scope.submitForm = function () {
            if($("#form_1").valid()){
                $.post(site.userSetting.member.setting, $('#form_1').serialize(),function (result) {
                        if (result.code == 0) {
                            alert('保存成功!');
                            parent.location.href = site.userSetting.view+'.html';
                        } else {
                            alert(result.message);
                        }
                }, 'json');
            }
        }
        $scope.tempSelectd=function(temp){
            console.info('tempSelectd{....')
            var extInfos=$data.item.extInfos;
            if(extInfos && temp){
                for(var i=0;i<extInfos.length;i++){
                    var extInfo=extInfos[i];
                    if(temp.id==extInfo.templateId){
                        return true;
                    }
                }
            }
            return false;
        }
        $scope.getTempAttrVal=function(attr){
            console.info('getTempAttrVal{....')
            var extInfos=$data.item.extInfos;
            if(extInfos && attr){
                for(var i=0;i<extInfos.length;i++){
                    var extInfo=extInfos[i];
                    if(attr.templateId==extInfo.templateId){
//                        console.info('attributeJson==')
                        var attributeJson=JSON.parse(extInfo.attributeJson);
                        if(attributeJson) return attributeJson[attr.attributeCode];
                    }
                }
            }
            return "";
        }
        $scope.optionValuesToObj=function(optionValues){
            console.info('optionValuesToObj{....')
            var optionValuesArr=[];
            if(optionValues){
                var optionValuesTemp=util.split(optionValues,',');
                if(optionValuesTemp && optionValuesTemp.length>0){
                    for(var i=0;i<optionValuesTemp.length;i++){
                        var optionValue=util.split(optionValuesTemp[i],':');
                        optionValuesArr.push({key:optionValue[0],val:optionValue[1]});
                    }
                }
            }
            return optionValuesArr;
        }
        $scope.getOptionValuesHtml=function(id,attr){
            if(!attr||$data.attr[attr.attributeCode]) return;
            var html='';
//            html = html + '<select  name="'+("attr"+attr.templateId+attr.attributeCode)+'" class="form-control" placeholder="请选择'+attr.attributeName+'" '+(attr.required==1?'required=\"\"':'')+'>';
//            html = html + '<option value="">--请选择'+attr.attributeName+'--</option>';
            var attrOps=$scope.optionValuesToObj(attr.optionValues);
            if(attrOps && attrOps.length>0){
                for (var i=0;i<attrOps.length;i++){
                    var selectedStr='';
                    if(attrOps[i].key==$scope.getTempAttrVal(attr)) selectedStr='selected="selected"';
                    html = html + '<option  value="'+attrOps[i].key+'" '+selectedStr+'>'+attrOps[i].val+'</option>';
                }
            }
//            html = html + '</select>';
//            console.info(html)
            $data.attr[attr.attributeCode]=1;
            $('#'+id).append($ngCompile(html)($data));
        }
    });
    var loadInfo=function(id){
        console.info('loadInfo{....')
        $.get(site.member.info + id, {},function (result) {
             //console.info("获取数据.." + JSON.stringify(result));
             if (result.code == 0) {
                 if(result.data){
                     $data.item = result.data;
                 }else{
                     $data.item={};
                     $data.item.userId=sessionStorage.getItem(site.member.info);
                 }
                 loadTemplateIsList();
             } else {
                 $data.message = result.message;
                 alert( result.message);
             }
             if(!$data.$$phase) $data.$apply();
         }, 'json');
    }
    var loadTemplateIsList=function(){
        console.info('loadTemplateIsList{....')
        $.post(site.template.list , {"userType":1},function (result) {
            if (result.code == 0) {
                $data.templateResult = result.data;
                if(result.data && !util.notEmpty($('#templateIdA').val())) {
                    for (var i = 0; i < result.data.length; i++){
                        if ($data.tempSelectd(result.data[i])) {
                            $('#templateIdA').val(result.data[i].id);
                            getTemplateA(result.data[i].id);
                        }
                    }
                }
            } else {
                $data.templateMessage = result.message;
                alert( result.message);
            }
            if(!$data.$$phase) $data.$apply();
        }, 'json');
    }
    var getTemplateA=function(templateId){
        console.info('getTemplateA{....')
        if(!util.notEmpty(templateId)){
            templateId=$('#templateSelect').val();;
        }
        $('#templateIdA').val(templateId);
        $.post(site.templateAttribute.list , {"templateId":templateId},function (result) {
            if (result.code == 0) {
                $data.attributesResult = result.data;
            } else {
                $data.attributesMessage = result.message;
                alert( result.message);
            }
            if(!$data.$$phase) $data.$apply();
        }, 'json');
    }
    $(document).ready(function(){
        setTimeout(function(){
            $("#form_1").validate();
        },1000);

        laydate({elem: '#bean-birthday',event: 'click'});

        laydate({elem: '#bean-workStartDate',event: 'click'});
    });
</script>
</body>
</html>

