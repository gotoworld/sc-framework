@[
/*
 * 组织架构_用户 后台管理 (信息编辑页面)
 *
 * VERSION  DATE		BY		   REASON
 * -------- ----------- ------------ ------------------------------------------
 * 1.00	 2015.10.01  easycode   程序.发布
 * -------- ----------- ------------ ------------------------------------------
 * Copyright 2015 isd System. - All Rights Reserved.
 *
 */
 /]
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	@[ include("../include/meta.html"){} /]
	@[ include("../include/public_init_js_css.html"){} /]
	<style type="text/css">
	</style>
</head>

<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
	<div class="row">
		<div class="ibox float-e-margins">
			<div class="ibox-content col-sm-12">
				<div class="alert alert-danger alert-dismissable" id="result_message" style="display: none;">
					<button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
					<label id="result_message_txt"></label>
				</div>
				<form id="org02_01" method="post" class="form m-t" target="_parent" accept-charset="UTF-8" action="javascript:submitUserInfo();">
					<div class="col-sm-12">
						<div style="float:right;">
							<input class="btn btn-primary" type="submit" value="保存" /> | <a href="javascript:;" onclick="closeMyBoxLayer();">返回</a>
						</div>
					</div>
					<input type="hidden" name="pageNum" id="bean-pageNum" value="${bean.pageNum}"/>
					<input type="hidden" name="id" value="${bean.id}" />
					<input type="hidden" name="token" value="${bean.token}" />
					<div class="col-sm-8">
						<div class="form-group clearfix">
							<label class="col-md-2 control-label" >原始密码</label>
							<div class="col-md-8">
								<input type="hidden" name="oldpwd" id="oldpwd" value="" />
								<input id="bean-old" type="password" class="form-control" onchange="cPwd('oldpwd',this.value)"  onblur="cPwd('oldpwd',this.value)" placeholder="请输入原始密码" value=""  required="true" aria-describedby="bean-old-error"  aria-required="true" minlength="4" maxlength="64" aria-invalid="true"/>
								<span id="bean-old-error" class="help-block m-b-none"></span>
							</div>
						</div>
						<div class="form-group clearfix">
							<label class="col-md-2 control-label" >新密码</label>
							<div class="col-md-8">
								<input type="hidden" name="newpwd"  id="newpwd"  value="" />
								<input id="bean-newpwd" type="password" class="form-control" id="bean-newpwd" onchange="cPwd('newpwd',this.value)"  onblur="cPwd('newpwd',this.value)" placeholder="请输入新密码" value="" aria-describedby="bean-newpwd-error"  required="true" aria-required="true" minlength="4" maxlength="64" aria-invalid="true"/>
								<span id="bean-newpwd-error" class="help-block m-b-none"></span>
							</div>
						</div>
						<div class="form-group clearfix">
							<label class="col-md-2 control-label" >密码确认</label>
							<div class="col-md-8">
								<input type="hidden" name="confirmpwd" id="confirmpwd" value="" />
								<input id="bean-confirmpwd" type="password" class="form-control" onchange="cPwd('confirmpwd',this.value)"  onblur="cPwd('confirmpwd',this.value)" placeholder="请再次输入新密码" value="" aria-describedby="bean-confirmpwd-error"  required="true" equalTo="#bean-newpwd" aria-required="true" minlength="4" maxlength="64" aria-invalid="true"/>
								<span id="bean-confirmpwd-error" class="help-block m-b-none"></span>
							</div>
						</div>
					</div>
					<div class="col-sm-12">
						<div style="width: 200px;margin: 0 auto;">
							<input class="btn btn-primary" type="submit" value="保存" /> | <a href="javascript:;" onclick="closeMyBoxLayer();">返回</a>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
	@[ include("../include/public_last_js_css.html"){} /]
	<script src="${basePath!}js/jQuery.md5.js" type="text/javascript"></script>

	<script type="text/javascript">
        $().ready(function(){
            $("#org02_01").validate();
        });
		function cPwd(id,val){
			if(val){
				$('#'+id).val($.md5($.trim(val)));
			}else{
				$('#'+id).val('');
			}
		}
		function submitUserInfo(){
			jQuery("#org02_01").ajaxSubmit({
				type:"post",  //提交方式
				url:"${basePath}h/org/user/updatePwd", //请求url
				success:function(result){ //提交成功的回调函数
					if(result.code==0){
                        $('#result_message').hide();
						alert('修改成功!');
						closeMyBoxLayer();
					}else{
					    $('#result_message').show();
					    $('#result_message_txt').html(result.message);
					}
				}
			});
		}
	</script>
</body>
</html>